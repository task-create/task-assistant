<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>TASK Assistant</title>
<!-- styles remain unchanged -->
</head>
<body>
<main class="app">
<header class="header">
<button class="reset" id="resetBtn" aria-label="Clear chat">↺</button>
<div class="badge" id="scrollTopBtn" tabindex="0" role="button" aria-label="Scroll to top">TASK Assistant</div>
<button class="mic" id="micBtn" aria-label="Voice input">🎙</button>
<button class="lang" id="langBtn" aria-label="Language menu" aria-haspopup="menu" aria-expanded="false">🌐</button>
<button class="theme" id="themeToggle" aria-label="Toggle theme">☼</button>
<div class="langmenu" id="langMenu" role="menu" aria-hidden="true">
  <button role="menuitem" data-lang="en">English</button>
  <button role="menuitem" data-lang="es">Español</button>
  <button role="menuitem" data-lang="ht">Kreyòl Ayisyen</button>
</div>
</header>
<!-- removed redundant nav rail -->
<section class="chat" id="chat" role="log" aria-live="polite" aria-relevant="additions" aria-label="Chat transcript"></section>
<footer class="footer">
  <div class="row">
    <label class="visually-hidden" for="box">Type a message</label>
    <input id="box" type="text" placeholder="Type: training, jobs, hours, address, bus, resume, benefits…" autocomplete="off"/>
    <button class="send" id="send" aria-label="Send">➤</button>
  </div>
  <div class="status">⚠️ I can make mistakes — please double-check important info. <a href="#" id="privacyLink">Privacy</a></div>
</footer>
<div class="sticky-cta" id="ctaBar" aria-hidden="true">
  <a class="cta cta-call" id="ctaCall" href="tel:6093371624">📞 Call (609) 337‑1624</a>
  <a class="cta cta-sms" id="ctaSMS" href="sms:16096976215?&body=Hi%2C%20I%27d%20like%20to%20schedule%20an%20appointment">📱 Text us</a>
</div>
</main>
<script>
// keep UI strings
// ... existing code ...

// Expand frustration detection and job help responses
function find(t){ const s = ' ' + norm(t) + ' '; const hits = new Set();
 if (/(hi|hello|hey|hola|bonjou)\b/.test(s)) hits.add('greeting');
 if (/(thanks|thank you|gracias|merci|mesi)\b/.test(s)) hits.add('thanks');
 if (/(bye|goodbye|adios|ciao)\b/.test(s)) hits.add('bye');
 if (/(wtf|sucks|useless|annoying|hate this|mad|angry|pissed|stupid|dumb|frustrated|no sirve|esto apesta|sa pa mache|help now|this is dumb|not working|wtf is this)/.test(s)) hits.add('frust');
 if (/(appointment|appt|make|schedule|cita|randevou|walk[\s-]?in)/.test(s)) hits.add('appt');
 if (/(job|jobs|employment|hiring|positions|empleo|trabajo|travay|career|find work|openings)/.test(s)) hits.add('jobs');
 if (/(training|program|class|certification|course|entrenamiento|fòmasyon|learn|skills)/.test(s)) hits.add('train');
 if (/(hours|time|open|close|horario|le|lè)/.test(s)) hits.add('hours');
 if (/(address|location|where|direccion|dirección|kote|adrès)/.test(s)) hits.add('loc');
 if (/(resume|cv|curriculum vita?e?|cover letter|application)/.test(s)) hits.add('res');
 if (/(resource|services|benefits|snap|recursos|resous|support|help with)/.test(s)) hits.add('resource');
 if (/(bus|route|njt|transit|schedule|transport)/.test(s)) hits.add('bus');
 if (/(alerts?|notifica(?:tion|ciones)?)/.test(s)) hits.add('alerts');
 return [...hits]; }

// Expand replies to cover more patron/job issues
function reply(intents){
  const blocks=[];
  const phoneMain='(609) 337-1624';
  const phoneJobs='(609) 697-6166';
  const phoneHelp='(609) 697-6215';
  if(intents.includes('frust')) blocks.push(sec('🙏',UI[lang].frust+"<br>If this still isn’t working, please come by TASK or call us right now."));
  if(intents.includes('jobs')){
    let m=`<a href="https://bycell.co/ddmtq" target="_blank">Open positions</a><br><a href="https://bycell.co/ddmtr" target="_blank">Alerts</a><br>Need resume help? See <a href="https://bycell.co/ddmui" target="_blank">templates</a>.<br>Call <a href="tel:6096976166">${phoneJobs}</a> or <a href="tel:6096976215">${phoneHelp}</a>.`;
    blocks.push(sec('💼 Jobs',m));
  }
  // keep other replies unchanged
  // ... rest of reply function ...
}

// ... existing code ...
</script>
</body>
</html>
